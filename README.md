-----

# X (Twitter) Archive Tool

このツールセットは、X（旧Twitter）の特定のユーザーのポストを収集し、画像や動画を含めてローカルに保存・閲覧するためのアーカイブシステムです。

## 📂 ファイル構成

| ファイル名 | 役割 | 概要 |
| :--- | :--- | :--- |
| **`app-save.js`** | **収集** | ブラウザ上で動作し、ツイートのテキストやメタデータを抽出してJSON形式で保存します。 |
| **`app-jsonparse.py`** | **保存** | 保存されたJSONを解析し、画像・動画をローカルにダウンロードしてデータを統合・整形します。 |
| **`index.html`** <br> **`style.css`** <br> **`script.js`** | **閲覧** | 保存されたデータを読み込み、XのUIを再現したオフラインビューワーで表示します。 |

-----

## 🚀 使い方

### Step 1: データの収集 (`app-save.js`)

Webブラウザ（Chrome, Edgeなど）を使用して、Xのタイムラインからデータを抽出します。

1.  PCのブラウザで、アーカイブしたいユーザーのプロフィールページ（例: `https://x.com/username`）を開きます。
2.  キーボードの `F12` キー（または右クリック -\> 「検証」）を押して、開発者ツールを開きます。
3.  「コンソール (Console)」タブを選択します。
4.  `app-save.js` の内容をすべてコピーし、コンソールに貼り付けて `Enter` キーを押します。
5.  **自動収集が始まります**。
      * 画面が自動的にスクロールされ、データが収集されます。
      * プロフィールの数値（フォロー・フォロワー数）が自動取得できない場合、入力プロンプトが表示されるので手動で入力してください。
6.  これ以上スクロールできなくなると収集が完了し、`{ユーザーID}_tweets_raw.json` というファイルが自動的にダウンロードされます。

### Step 2: 画像のダウンロードとデータ整形 (`app-jsonparse.py`)

Pythonを使用して、画像のダウンロードとデータのマージ処理を行います。

**事前準備:**
Pythonがインストールされている必要があります。また、以下のライブラリが必要です。

```bash
pip install requests
```

**実行手順:**

1.  適当な作業用フォルダを作成し、以下のファイルを同じ場所に置きます。
      * `app-jsonparse.py`
      * Step 1でダウンロードした `{ユーザーID}_tweets_raw.json`
2.  ターミナル（コマンドプロンプト）でそのフォルダを開き、スクリプトを実行します。
    ```bash
    python app-jsonparse.py
    ```
3.  スクリプトが自動的に `.json` ファイルを検出し、処理を開始します。
      * **画像・動画**: `{ユーザーID}_images/` フォルダにダウンロードされます。
      * **整形データ**: `{ユーザーID}_data.json` というファイルが生成されます（これがビューワー用データです）。

> **Note:** 過去に取得したデータがある状態で再度実行すると、差分（新しいツイート）のみを追加・更新します。

### Step 3: アーカイブの閲覧 (`index.html`, `script.js`, `style.css`)

専用のビューワーで保存したデータを閲覧します。

1.  `index.html` をブラウザで開きます。
2.  画面上の「JSONファイルをドロップ」エリアに、Step 2で生成された **`{ユーザーID}_data.json`** をドラッグ＆ドロップします。
3.  タイムラインが表示されます。

**ビューワーの機能:**

  * **オフライン閲覧**: 画像もローカルから読み込まれるため、ネット接続がなくても閲覧可能です。
  * **ダークモード**: 左サイドバーの「表示切り替え」でライト/ダークモードを変更できます。
  * **メディアタブ**: 画像付きツイートのみを絞り込んで表示できます。
  * **複数アカウント**: 複数の `.data.json` を一度に読み込むと、サイドバーでアカウントを切り替えて閲覧できます。

-----

## 📁 ディレクトリ構成例

処理完了後は以下のようなフォルダ構成になります。

```text
/archive_folder
  ├── app-save.js             # (ブラウザで使用)
  ├── app-jsonparse.py        # (実行用スクリプト)
  ├── index.html              # (閲覧用ビューワー)
  ├── script.js               # (ビューワー用プログラム)
  ├── style.css               # (ビューワーデザイン)
  │
  ├── userA_tweets_raw.json   # Step1で保存した生データ
  ├── userA_data.json         # Step2で生成された閲覧用データ
  └── userA_images/           # ダウンロードされた画像・動画フォルダ
      ├── tweetID_0.jpg
      ├── tweetID_1.mp4
      └── profile/            # アイコン履歴
```

-----

## ⚠️ 注意事項

  * **利用規約**: このツールは私的なアーカイブ作成を目的としています。スクレイピング行為はXの利用規約に抵触する可能性があるため、使用は自己責任で行ってください。過度なアクセスや再配布は避けてください。
  * **動画ファイル**: GIF動画などは `.mp4` として保存されます。
  * **画像取得**: ネットワーク状況やサーバー側の制限により、一部の画像が取得できない場合があります（404エラー等はスキップされます）。
